# 链接（Linking）
## 1. 链接的意义
构造大型程序需要用到链接技术。在中大型的项目中，基本不可能直接将所有文件通过一条 `gcc` 命令直接生成二进制文件，会有如下缺陷：
- 全量编译：每修改一次文件都需要进行全量编译
- 编译缓慢：无法进行并行编程，编译速度非常缓慢
- 非模块化：模块与模块之间可以做到清晰的边界

因此在现在大中型项目中，经常会以模块的视角对项目进行拆分构建出目标二进制文件。而以模块的视角进行编译的过程中，就会产生**可重定位目标文件**，**静态链接库**以及**动态链接库**，而这些文件如何组合成最终的二进制文件，就需要用到链接技术。而具体的链接器又可分为静态链接器以及动态链接器。

### 1.1 静态链接
静态链接器以一组可可重定位目标文件和命令行参数作为输入，生成一个完全链接的、可以加载和运行的可执行目标文件作为输出。

静态链接器主要完成了以下两大功能：
- **符号解析（symbol resolution）**：目标文件会定义与引用符号，符号的类型有诸如函数、一个全局变量或一个静态变量（static 修饰的变量）。符号解析的作用是将每个符号引用和一个符号定义关联起来。
- **重定位（relocation）**：编译器和汇编器生产从地址0开始的代码和数据节（section）。链接器通过把每个符号定义与一个内存位置关联起来，从而重定位这些节，然后修改所有对这些符号的引用，使它们指向这个内存区域。链接器使用汇编器产生的重定位条目（relocation entry）的详细指令，不加甄别地执行这样的重定位

### 1.2 动态链接
动态链接指的是动态链接库运行或加载到任意的内存地址，并和一个在内存中的程序链接起来的过程。动态链接特点如下：
- 动态链接可发生在编译时或运行时
- 动态链接库具有位置无关的特点

## 2. 可重定位目标文件
- object file的内容简介
- 符号、符号表的定义、符号解析
- linker解析多重定义符号的规则
## 3. 静态库
- 静态库存在的意义（和object file做比较）
- linker如何解析静态库符号（和object file做比较）
## 4. 重定位
- 重定位Entry的作用（.rel.text .rel.data）
- 重定位的符号引用（重定位PC相对引用和重定位绝对应用），什么时候相对什么时候绝对，举例子
## 5. 可执行文件
- 可执行文件的ELF结构（和object file比较）
- 可行性文件如何加载进内存，在内存中的分布
## 6. 动态链接库
- 动态链接库相比静态链接库的优势
- 编译期与运行期加载动态链接库
- 动态链接库与位置无关的必要性（GOT、PLT），程序如何加载动态链接库